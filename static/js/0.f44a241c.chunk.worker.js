!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/minesweeper-10000/",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e,t,n){return(s=c()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function l(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.r(t);var f=Symbol("Comlink.proxy"),h=Symbol("Comlink.endpoint"),p=Symbol("Comlink.releaseProxy"),m=Symbol("Comlink.thrown"),v=function(e){return"object"===typeof e&&null!==e||"function"===typeof e},d=new Map([["proxy",{canHandle:function(e){return v(e)&&e[f]},serialize:function(e){var t=new MessageChannel,n=t.port1,r=t.port2;return y(e,n),[r,[r]]},deserialize:function(e){return e.start(),w(e,[],t);var t}}],["throw",{canHandle:function(e){return v(e)&&m in e},serialize:function(e){var t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;t.addEventListener("message",(function n(r){if(r&&r.data){var i,u=Object.assign({path:[]},r.data),c=u.id,f=u.type,h=u.path,p=(r.data.argumentList||[]).map(k);try{var v=h.slice(0,-1).reduce((function(e,t){return e[t]}),e),d=h.reduce((function(e,t){return e[t]}),e);switch(f){case"GET":i=d;break;case"SET":v[h.slice(-1)[0]]=k(r.data.value),i=!0;break;case"APPLY":i=d.apply(v,p);break;case"CONSTRUCT":var g;i=N(s(d,l(p)));break;case"ENDPOINT":var w=new MessageChannel,E=w.port1,S=w.port2;y(e,S),i=M(E,[E]);break;case"RELEASE":i=void 0;break;default:return}}catch(g){i=o({value:g},m,0)}Promise.resolve(i).catch((function(e){return o({value:e},m,0)})).then((function(e){var r=a(T(e),2),i=r[0],o=r[1];t.postMessage(Object.assign(Object.assign({},i),{id:c}),o),"RELEASE"===f&&(t.removeEventListener("message",n),b(t))}))}})),t.start&&t.start()}function b(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function g(e){if(e)throw new Error("Proxy has been released and is not useable")}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=!1,i=new Proxy(n,{get:function(n,a){if(g(r),a===p)return function(){return C(e,{type:"RELEASE",path:t.map((function(e){return e.toString()}))}).then((function(){b(e),r=!0}))};if("then"===a){if(0===t.length)return{then:function(){return i}};var o=C(e,{type:"GET",path:t.map((function(e){return e.toString()}))}).then(k);return o.then.bind(o)}return w(e,[].concat(l(t),[a]))},set:function(n,i,o){g(r);var u=a(T(o),2),c=u[0],s=u[1];return C(e,{type:"SET",path:[].concat(l(t),[i]).map((function(e){return e.toString()})),value:c},s).then(k)},apply:function(n,i,o){g(r);var u=t[t.length-1];if(u===h)return C(e,{type:"ENDPOINT"}).then(k);if("bind"===u)return w(e,t.slice(0,-1));var c=a(E(o),2),s=c[0],l=c[1];return C(e,{type:"APPLY",path:t.map((function(e){return e.toString()})),argumentList:s},l).then(k)},construct:function(n,i){g(r);var o=a(E(i),2),u=o[0],c=o[1];return C(e,{type:"CONSTRUCT",path:t.map((function(e){return e.toString()})),argumentList:u},c).then(k)}});return i}function E(e){var t,n=e.map(T);return[n.map((function(e){return e[0]})),(t=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var S,A,O,j,x=new WeakMap;function M(e,t){return x.set(e,t),e}function N(e){return Object.assign(e,o({},f,!0))}function T(e){var t,n=function(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw o}}}}(d);try{for(n.s();!(t=n.n()).done;){var r=a(t.value,2),o=r[0],u=r[1];if(u.canHandle(e)){var c=a(u.serialize(e),2);return[{type:"HANDLER",name:o,value:c[0]},c[1]]}}}catch(s){n.e(s)}finally{n.f()}return[{type:"RAW",value:e},x.get(e)||[]]}function k(e){switch(e.type){case"HANDLER":return d.get(e.name).deserialize(e.value);case"RAW":return e.value}}function C(e,t,n){return new Promise((function(r){var i=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===i&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),n)}))}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e[e.closed=0]="closed",e[e.open=1]="open"}(S||(S={})),function(e){e[e.notDefined=-1]="notDefined",e[e.empty=0]="empty",e[e.one=1]="one",e[e.two=2]="two",e[e.three=3]="three",e[e.four=4]="four",e[e.five=5]="five",e[e.six=6]="six",e[e.seven=7]="seven",e[e.eight=8]="eight",e[e.mine=9]="mine"}(A||(A={})),function(e){e[e.empty=10]="empty",e[e.one=11]="one",e[e.two=12]="two",e[e.three=13]="three",e[e.four=14]="four",e[e.five=15]="five",e[e.six=16]="six",e[e.seven=17]="seven",e[e.eight=18]="eight",e[e.mine=19]="mine"}(O||(O={})),function(e){e[e.empty=20]="empty",e[e.one=21]="one",e[e.two=22]="two",e[e.three=23]="three",e[e.four=24]="four",e[e.five=25]="five",e[e.six=26]="six",e[e.seven=27]="seven",e[e.eight=28]="eight",e[e.mine=29]="mine"}(j||(j={}));var R=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;P(this,e),this.value=t,this.next=n},L=function(){function e(){P(this,e),this.head=null,this.tail=null,this._size=0}var t,n,r;return t=e,(n=[{key:"size",get:function(){return this._size}},{key:"isEmpty",value:function(){return!this.head}},{key:"peek",value:function(){return this.isEmpty()?null:this.head.value}},{key:"enqueue",value:function(e){var t=new R(e);return this._size++,this.isEmpty()?(this.tail=t,this.head=t,this):(this.tail.next=t,this.tail=t,this)}},{key:"dequeue",value:function(){if(this.isEmpty())return null;var e=this.head.value;return this.head=this.head.next,this._size--,e}}])&&_(t.prototype,n),r&&_(t,r),e}();y({calculateNeighbours:function(e,t,n,r){if(!this.map)throw new Error("Map is undefined");return function(e,t,n,r,i){var a=0,o=i*n+t,u=t,c=n;return 0!==u&&e[o-1]===A.mine&&a++,u!==r-1&&e[o+1]===A.mine&&a++,0!==c&&e[o-r]===A.mine&&a++,c!==i&&e[o+r]===A.mine&&a++,0!==u&&(0!==c&&e[o-r-1]===A.mine&&a++,c!==i&&e[o+r-1]===A.mine&&a++),u!==r-1&&(0!==c&&e[o-r+1]===A.mine&&a++,c!==i&&e[o+r+1]===A.mine&&a++),a}(this.map,e,t,n,r)},recursiveCalculateNeighbours:function(e,t,n,r,i){if(!this.map)throw new Error("Map is undefined");if(!(e<0||t<0||e>=n||t>=r)){var a,o=r*t+e;try{a=Atomics.load(this.map,o)}catch(c){return}if(a===A.notDefined){i("".concat(e,"_").concat(t));var u=this.calculateNeighbours(e,t,n,r);Atomics.store(this.map,o,u),u===A.empty&&(this.recursiveCalculateNeighbours(e-1,t,n,r,i),this.recursiveCalculateNeighbours(e+1,t,n,r,i),this.recursiveCalculateNeighbours(e,t-1,n,r,i),this.recursiveCalculateNeighbours(e,t+1,n,r,i),this.recursiveCalculateNeighbours(e-1,t-1,n,r,i),this.recursiveCalculateNeighbours(e-1,t+1,n,r,i),this.recursiveCalculateNeighbours(e+1,t-1,n,r,i),this.recursiveCalculateNeighbours(e+1,t+1,n,r,i))}}},generateMap:function(e,t){if(!this.map)throw new Error("Map is undefined");var n;console.log("Thread ".concat(self.name," stated map generation"));for(var r=this.map,i=e;i<r.length-2;i+=t){var a=Math.floor(Math.random()*(r.length-i-1)+i);Atomics.store(r,i,Atomics.exchange(r,a,Atomics.load(r,i))),n||Atomics.load(r,i)===A.mine||(n=i)}return console.log("Thread ".concat(self.name," finished map generation")),n},map:void 0,setMap:function(e){this.map=new Int8Array(e)},calculateNeighboursInRange:function(e,t,n,r,i,a){console.log("Thread ".concat(self.name," stated neighbour calculation."));for(var o=n.start;o<=n.end;o+=1+i)for(var u=r.start;u<=r.end;u++){var c=t*u+o;if(Atomics.load(this.map,c)===A.notDefined){var s=this.calculateNeighbours(o,u,e,t);Atomics.store(this.map,c,s),a&&a(o,u)}}},chainOpen:function(e,t,n,r){var i=this;if(!this.map)throw new Error("Map is undefined");console.log("Thread ".concat(self.name," stated chainOpen calculation."));var a=new L;function o(n,r){if(!(n<0||n>=e)&&!(r<0||r>=t))return t*r+n}a.enqueue(o(n,r));for(var u=0;!a.isEmpty();){var c=a.dequeue();if(null===c)break;var s=c%e,l=(c-s)/e,f=void 0;try{f=Atomics.load(this.map,c)}catch(h){continue}f>=10||(Atomics.store(this.map,c,f+10),u++,f===A.empty&&[o(s-1,l-1),o(s-1,l+1),o(s+1,l-1),o(s+1,l+1),o(s,l-1),o(s,l+1),o(s+1,l),o(s-1,l)].forEach((function(e){void 0!==e&&Atomics.load(i.map,e)<10&&a.enqueue(e)})))}return console.log("Thread ".concat(self.name," finished chainOpen calculation and opened: ").concat(u)),u}})}]);
//# sourceMappingURL=0.f44a241c.chunk.worker.js.map