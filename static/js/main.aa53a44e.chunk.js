(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){e.exports=n.p+"static/js/0.15b738ed.chunk.worker.js"},137:function(e,t,n){"use strict";n.r(t);var r,i=n(0),a=n.n(i),s=n(32),o=n.n(s),u=(n(117),n(118),n(11)),l=n(88),c=n(57),h=n(26),f=n(29),d=n(92),m=n(96),b=n(19),v=n(168),g=n(18),p=n(2);function j(e){if(e&&!Object(b.c)(e)&&e!==b.b.mine&&e!==b.b.empty)return e-10}function O(e,t){return void 0===e?r.openEmpty:t===g.a.Lost&&Object(b.f)(e)?r.openMine:Object(b.c)(e)||Object(b.d)(e)?r.closed:Object(b.f)(e)?r.openMine:r.openEmpty}!function(e){e.closed="gray",e.openMine="red",e.openEmpty="white"}(r||(r={}));var x,y=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var r;Object(h.a)(this,n),(r=t.call(this,e)).onClick=void 0,r.onContextMenu=void 0;var i=r.props,a=i.map,s=i.columnIndex,o=i.rowIndex;return r.onClick=a.getCellClickHandler(s,o),r.onContextMenu=a.getCellContextMenuHandler(s,o),r.state={value:a.getCellValueXY(s,o)},r}return Object(f.a)(n,[{key:"shouldComponentUpdate",value:function(e,t,n){return e.gameState===g.a.InGame?t.value!==this.state.value:(e.gameState===g.a.Won||e.gameState===g.a.Lost)&&Object(b.f)(t.value)}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,r=t.gameState,i=this.state.value;return void 0===i?Object(p.jsx)("div",{style:Object(c.a)(Object(c.a)({},n),{},{backgroundColor:"white"})}):Object(p.jsx)("div",{className:"Cell-root",style:Object(c.a)(Object(c.a)({},n),{},{backgroundColor:O(i,r)}),onClick:function(t){var n=e.onClick();void 0!==n&&n!==i&&e.setState({value:n})},onContextMenu:function(t){t.preventDefault();var n=e.onContextMenu();void 0!==n&&n!==i&&e.setState({value:n})},children:i&&(Object(b.d)(i)||r===g.a.Won&&Object(b.f)(i))?Object(p.jsx)(v.a,{}):j(i)})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.columnIndex,r=e.rowIndex,i=e.gameState,a=e.map;return i!==g.a.InGame&&i!==g.a.Won&&i!==g.a.Lost?null:{value:a.getCellValueXY(n,r)}}}]),n}(i.Component),w=n(77),S=n(28),C=n(24),k=function(){var e=Object(i.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(void 0),s=Object(u.a)(a,2),o=s[0],c=s[1],h=Object(i.useState)(S.a.getValue(C.a.gameState)),f=Object(u.a)(h,2),d=f[0],m=f[1];if(Object(i.useEffect)((function(){var e=S.a.getSubject(C.a.gameState).subscribe((function(e){m(e)}));return function(){e.unsubscribe()}}),[]),Object(i.useEffect)((function(){var e;if(d===g.a.Loading){null===o||void 0===o||o.destroy(),c(void 0);var t=S.a.getSubject(C.a.mapOptions).subscribe((function(n){t.unsubscribe();var i=n.width,a=n.height,s=n.mineCount;null===o||void 0===o||o.destroy(),e=new l.a(i,a,s),c(e),r(n),e.generate()}))}}),[d]),!o||!n||d===g.a.Loading)return Object(p.jsx)(p.Fragment,{});var b=n.width,v=n.height;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{children:Object(p.jsx)(w.a,{style:{width:"100%",height:"calc(100vh - 75px)"},children:function(e){var t=e.width,n=e.height;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(w.b,{rowCount:v,columnCount:b,rowHeight:25,height:n,width:t,columnWidth:25,cellRenderer:function(e){var t=e.columnIndex,n=e.rowIndex,r=e.key,i=e.style;return Object(p.jsx)(y,{style:i,gameState:d,map:o,columnIndex:t,rowIndex:n},r)}})})}})})})},I=n(187),M=n(188),E=n(95),_=n(181),N=n(176),z=["title","titleId"];function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function P(e,t){var n=e.title,r=e.titleId,a=V(e,z);return i.createElement("svg",L({xmlns:"http://www.w3.org/2000/svg",width:"545.000000pt",height:"555.000000pt",viewBox:"0 103 400.000000 200.000000",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":r},a),n?i.createElement("title",{id:r},n):null,x||(x=i.createElement("g",{transform:"translate(0.000000,865.000000) scale(0.100000,-0.100000)",fill:"currentColor",stroke:"none"},i.createElement("path",{d:"M1440 8530 l0 -120 -240 0 -240 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -240 0 -240 -120 0 -120 0 0 -600 0 -600 120 0 120 0 0 -240 0 -240 120 0 120 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 240 0 240 0 0 -120 0 -120 605 0 605 0 0 120 0 120 240 0 240 0 0 120 0 120 120 0 120 0 0 120 0 120 120 0 120 0 0 120 0 120 120 0 120 0 0 240 0 240 120 0 120 0 0 600 0 600 -120 0 -120 0 0 240 0 240 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -240 0 -240 0 0 120 0 120 -605 0 -605 0 0 -120z m1200 -240 l0 -120 240 0 240 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 120 0 120 0 0 -240 0 -240 120 0 120 0 0 -600 0 -600 -120 0 -120 0 0 -240 0 -240 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 -240 0 -240 0 0 -120 0 -120 -600 0 -600 0 0 120 0 120 -240 0 -240 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 240 0 240 -120 0 -120 0 0 600 0 600 120 0 120 0 0 240 0 240 120 0 120 0 0 120 0 120 120 0 120 0 0 120 0 120 240 0 240 0 0 120 0 120 600 0 600 0 0 -120z"}),i.createElement("path",{d:"M1200 7450 l0 -240 240 0 240 0 0 240 0 240 -240 0 -240 0 0 -240z"}),i.createElement("path",{d:"M2400 7450 l0 -240 240 0 240 0 0 240 0 240 -240 0 -240 0 0 -240z"}),i.createElement("path",{d:"M960 6130 l0 -120 120 0 120 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 600 0 600 0 0 120 0 120 120 0 120 0 0 120 0 120 120 0 120 0 0 120 0 120 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 -600 0 -600 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 -120z"}))))}var B,G=i.forwardRef(P),R=(n.p,["title","titleId"]);function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function W(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Y(e,t){var n=e.title,r=e.titleId,a=W(e,R);return i.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",width:"550pt",height:"545pt",viewBox:"506 460 400 400",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":r},a),n?i.createElement("title",{id:r},n):null,B||(B=i.createElement("g",{transform:"translate(0.000000,865.000000) scale(0.100000,-0.100000)",fill:"currentColor",stroke:"none"},i.createElement("path",{d:"M6480 3970 l0 -120 -240 0 -240 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -240 0 -240 -120 0 -120 0 0 -600 0 -600 120 0 120 0 0 -240 0 -240 120 0 120 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 240 0 240 0 0 -120 0 -120 605 0 605 0 0 120 0 120 240 0 240 0 0 120 0 120 120 0 120 0 0 120 0 120 120 0 120 0 0 120 0 120 120 0 120 0 0 240 0 240 120 0 120 0 0 600 0 600 -120 0 -120 0 0 240 0 240 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -240 0 -240 0 0 120 0 120 -605 0 -605 0 0 -120z m1200 -240 l0 -120 240 0 240 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 120 0 120 0 0 -240 0 -240 120 0 120 0 0 -600 0 -600 -120 0 -120 0 0 -240 0 -240 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 -240 0 -240 0 0 -120 0 -120 -600 0 -600 0 0 120 0 120 -240 0 -240 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 240 0 240 -120 0 -120 0 0 600 0 600 120 0 120 0 0 240 0 240 120 0 120 0 0 120 0 120 120 0 120 0 0 120 0 120 240 0 240 0 0 120 0 120 600 0 600 0 0 -120z"}),i.createElement("path",{d:"M6000 3010 l0 -120 120 0 120 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 120 0 120 0 0 120 0 120 120 0 120 0 0 -120 0 -120 120 0 120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 120 0 120 0 0 120 0 120 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 -120z"}),i.createElement("path",{d:"M7440 3010 l0 -120 120 0 120 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 120 0 120 0 0 120 0 120 120 0 120 0 0 -120 0 -120 120 0 120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 120 0 120 0 0 120 0 120 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 -120z"}),i.createElement("path",{d:"M6480 1570 l0 -120 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 120 0 120 0 0 120 0 120 120 0 120 0 0 120 0 120 600 0 600 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 120 0 120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -600 0 -600 0 0 -120z"}))))}var F,D=i.forwardRef(Y),X=(n.p,["title","titleId"]);function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function H(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function U(e,t){var n=e.title,r=e.titleId,a=H(e,X);return i.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",width:"545.000000pt",height:"555.000000pt",viewBox:"510 104 400.000000 200.000000",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":r},a),n?i.createElement("title",{id:r},n):null,F||(F=i.createElement("g",{transform:"translate(0.000000,865.000000) scale(0.100000,-0.100000)",fill:"currentColor",stroke:"none"},i.createElement("path",{d:"M6480 8530 l0 -120 -240 0 -240 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -240 0 -240 -120 0 -120 0 0 -600 0 -600 120 0 120 0 0 -240 0 -240 120 0 120 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 240 0 240 0 0 -120 0 -120 605 0 605 0 0 120 0 120 240 0 240 0 0 120 0 120 120 0 120 0 0 120 0 120 120 0 120 0 0 120 0 120 120 0 120 0 0 240 0 240 120 0 120 0 0 600 0 600 -120 0 -120 0 0 240 0 240 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -240 0 -240 0 0 120 0 120 -605 0 -605 0 0 -120z m1200 -240 l0 -120 240 0 240 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 120 0 120 0 0 -240 0 -240 120 0 120 0 0 -600 0 -600 -120 0 -120 0 0 -240 0 -240 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 -240 0 -240 0 0 -120 0 -120 -600 0 -600 0 0 120 0 120 -240 0 -240 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 240 0 240 -120 0 -120 0 0 600 0 600 120 0 120 0 0 240 0 240 120 0 120 0 0 120 0 120 120 0 120 0 0 120 0 120 240 0 240 0 0 120 0 120 600 0 600 0 0 -120z"}),i.createElement("path",{d:"M6000 7570 l0 -360 360 0 360 0 0 360 0 360 -360 0 -360 0 0 -360z"}),i.createElement("path",{d:"M7440 7570 l0 -360 360 0 360 0 0 360 0 360 -360 0 -360 0 0 -360z"}),i.createElement("path",{d:"M6720 6250 l0 -240 -120 0 -120 0 0 -120 0 -120 120 0 120 0 0 -240 0 -240 360 0 360 0 0 240 0 240 120 0 120 0 0 120 0 120 -120 0 -120 0 0 240 0 240 -360 0 -360 0 0 -240z m480 -120 l0 -120 120 0 120 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 120 0 120 0 0 120 0 120 120 0 120 0 0 -120z"}))))}var q,J=i.forwardRef(U),Q=(n.p,["title","titleId"]);function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Z(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function $(e,t){var n=e.title,r=e.titleId,a=Z(e,Q);return i.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",width:"545.000000pt",height:"549.000000pt",viewBox:"0 470 405.000000 380.000000",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":r},a),n?i.createElement("title",{id:r},n):null,q||(q=i.createElement("g",{transform:"translate(0.000000,865.000000) scale(0.100000,-0.100000)",fill:"currentColor",stroke:"none"},i.createElement("path",{d:"M1440 3970 l0 -120 -240 0 -240 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -240 0 -240 -120 0 -120 0 0 -600 0 -600 120 0 120 0 0 -240 0 -240 120 0 120 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 240 0 240 0 0 -120 0 -120 605 0 605 0 0 120 0 120 240 0 240 0 0 120 0 120 120 0 120 0 0 120 0 120 120 0 120 0 0 120 0 120 120 0 120 0 0 240 0 240 120 0 120 0 0 600 0 600 -120 0 -120 0 0 240 0 240 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -240 0 -240 0 0 120 0 120 -605 0 -605 0 0 -120z m1200 -240 l0 -120 240 0 240 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 120 0 120 0 0 -240 0 -240 120 0 120 0 0 -240 0 -240 -120 0 -120 0 0 -120 0 -120 120 0 120 0 0 -240 0 -240 -120 0 -120 0 0 -240 0 -240 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 -240 0 -240 0 0 -120 0 -120 -600 0 -600 0 0 120 0 120 -240 0 -240 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 240 0 240 -120 0 -120 0 0 240 0 240 120 0 120 0 0 120 0 120 -120 0 -120 0 0 240 0 240 120 0 120 0 0 240 0 240 120 0 120 0 0 120 0 120 120 0 120 0 0 120 0 120 240 0 240 0 0 120 0 120 600 0 600 0 0 -120z"}),i.createElement("path",{d:"M960 2770 l0 -120 -120 0 -120 0 0 -120 0 -120 -120 0 -120 0 0 -120 0 -120 120 0 120 0 0 120 0 120 120 0 120 0 0 -120 0 -120 120 0 120 0 0 -120 0 -120 240 0 240 0 0 120 0 120 120 0 120 0 0 240 0 240 120 0 120 0 0 -240 0 -240 120 0 120 0 0 -120 0 -120 240 0 240 0 0 120 0 120 120 0 120 0 0 120 0 120 120 0 120 0 0 -120 0 -120 120 0 120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -120 0 -120 0 0 120 0 120 -1080 0 -1080 0 0 -120z"}),i.createElement("path",{d:"M1200 1090 l0 -120 120 0 120 0 0 -120 0 -120 600 0 600 0 0 120 0 120 120 0 120 0 0 120 0 120 -120 0 -120 0 0 -120 0 -120 -600 0 -600 0 0 120 0 120 -120 0 -120 0 0 -120z"}))))}var ee,te=i.forwardRef($),ne=(n.p,a.a.memo((function(e){var t,n=e.gameState,r=e.onClick,i=e.className;switch(n){case g.a.InGame:t=G;break;case g.a.Loading:case g.a.Refreshing:t=J;break;case g.a.Lost:t=D;break;case g.a.Won:t=te}return Object(p.jsx)(t,{className:i,onClick:r})}))),re=a.a.memo((function(e){var t=e.className,n=Object(S.b)(C.a.mineCounter),r=Object(u.a)(n,1)[0],i=Object(S.b)(C.a.gameState),a=Object(u.a)(i,2),s=a[0],o=a[1],l=Object(S.b)(C.a.timer),c=Object(u.a)(l,1)[0];return Object(p.jsxs)("div",{className:"GameUI-root ".concat(null!==t&&void 0!==t?t:""),children:[Object(p.jsx)("div",{className:"GameUI-numberBoxContainer",children:s!==g.a.Loading&&Object(p.jsx)("div",{className:"GameUI-numberBox",children:r})}),Object(p.jsx)(ne,{className:"GameUI-face",gameState:s,onClick:function(){s!==g.a.Loading&&o(g.a.Loading)}}),Object(p.jsx)("div",{className:"GameUI-numberBoxContainer",children:s!==g.a.Loading&&Object(p.jsx)("div",{className:"GameUI-numberBox",children:c})})]})})),ie=n(185),ae=n(182),se=n(186),oe=n(178),ue=n(190),le=n(189),ce=n(38),he=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,null,[{key:"getMapOptions",value:function(){var e=localStorage.getItem(C.a.mapOptions.toString());return null===e?null:JSON.parse(e)}},{key:"setMapOptions",value:function(e){localStorage.setItem(C.a.mapOptions.toString(),JSON.stringify(e))}}]),e}(),fe=a.a.memo((function(e){e.className;var t,n,r,a=e.openSubj,s=Object(ce.b)(a),o=Object(u.a)(s,2),l=o[0],c=o[1],h=Object(S.b)(C.a.mapOptions),f=Object(u.a)(h,2),d=f[0],m=d.width,b=d.height,v=d.mineCount,j=f[1],O=Object(S.b)(C.a.gameState),x=Object(u.a)(O,2),y=(x[0],x[1]),w=Object(i.useState)(m.toString()),k=Object(u.a)(w,2),I=k[0],M=k[1],E=Object(i.useState)([]),_=Object(u.a)(E,2),N=_[0],z=_[1],L=Object(i.useState)(b.toString()),V=Object(u.a)(L,2),P=V[0],B=V[1],G=Object(i.useState)([]),R=Object(u.a)(G,2),T=R[0],W=R[1],Y=Object(i.useState)(v.toString()),F=Object(u.a)(Y,2),D=F[0],X=F[1],A=Object(i.useState)([]),H=Object(u.a)(A,2),U=H[0],q=H[1],J=Object(i.useState)(Number(I)*Number(P)),Q=Object(u.a)(J,2),K=Q[0],Z=Q[1];function $(){c(!1)}return Object(i.useEffect)((function(){Z(Number(I)*Number(P))}),[I,P]),Object(p.jsxs)(ie.a,{open:l,className:"SettingsDialog-root",onClose:$,children:[Object(p.jsx)(ae.a,{children:"Minesweeper Game Settings"}),Object(p.jsxs)(se.a,{className:"SettingsDialog-content",children:[Object(p.jsx)(oe.a,{label:"Width",className:"SettingsDialog-textField",value:I,onChange:function(e){var t=e.target.value;if(!t)return z(["This field is required"]),void M(t);t=t.replace(/^[\d]]/g,""),M(t);var n=Number(t),r=[];n<1?r.push("Width should be greater then 1"):n>1e4&&r.push("Width should be lesser then 10000"),z(r)},error:!!N.length,helperText:null!==(t=N[0])&&void 0!==t?t:void 0}),Object(p.jsx)(oe.a,{label:"Height",className:"SettingsDialog-textField",value:P,onChange:function(e){var t=e.target.value;if(!t)return W(["This field is required"]),void B(t);t=t.replace(/^[\d]]/g,""),B(t);var n=Number(t),r=[];n<1?r.push("Height should be greater then 1"):n>1e4&&r.push("Height should be lesser then 10000"),W(r)},error:!!T.length,helperText:null!==(n=T[0])&&void 0!==n?n:void 0}),Object(p.jsx)(oe.a,{label:"Mines",className:"SettingsDialog-textField",value:D,onChange:function(e){var t=e.target.value;if(!t)return q(["This field is required"]),void X(t);t=t.replace(/^[\d]]/g,""),X(t);var n=Number(t),r=[];n<1?r.push("There should be at least 1 mine :)"):n>=K&&r.push("Number of mines should be lesser then total size minus 1"),q(r)},error:!!U.length,helperText:null!==(r=U[0])&&void 0!==r?r:void 0})]}),Object(p.jsxs)(ue.a,{children:[Object(p.jsx)(le.a,{onClick:$,children:"Cancel"}),Object(p.jsx)(le.a,{disabled:!!N.length||!!T.length||!!U.length,onClick:function(){if(!(N.length||T.length||U.length)){var e={width:Number(I),height:Number(P),mineCount:Number(D)};he.setMapOptions(e),c(!1),y(g.a.Loading),j(e)}},children:"Start"})]})]})})),de=a.a.memo((function(e){var t=e.className,n=a.a.useState(null),r=Object(u.a)(n,2),s=r[0],o=r[1],l=Boolean(s),c=Object(i.useState)((function(){return new ce.a(!1)})),h=Object(u.a)(c,1)[0];return Object(p.jsxs)(I.a,{className:"Menu-root ".concat(null!==t&&void 0!==t?t:""),children:[Object(p.jsx)(re,{className:"Menu-inGameUi"}),Object(p.jsxs)("div",{className:"Menu-optionsMenu",children:[Object(p.jsx)(M.a,{onClick:function(e){o(e.currentTarget)},children:Object(p.jsx)(N.a,{})}),Object(p.jsx)(E.a,{anchorEl:s,open:l,onClose:function(){o(null)},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:Object(p.jsx)(_.a,{onClick:function(){h.next(!0),o(null)},children:"New Game"})})]}),Object(p.jsx)(fe,{openSubj:h})]})})),me=n(177);S.a.register(C.a.timer,0).register(C.a.mineCounter,0).register(C.a.gameState,g.a.Loading).register(C.a.mapOptions,null!==(ee=he.getMapOptions())&&void 0!==ee?ee:{width:10,height:10,mineCount:25});var be=function(){return Object(p.jsxs)(me.a,{injectFirst:!0,children:[Object(p.jsx)(de,{}),Object(p.jsx)(k,{})]})},ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,191)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),a(e),s(e)}))};o.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(be,{})}),document.getElementById("root")),ve()},18:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.InGame="InGame",e.Lost="Lost",e.Won="Won",e.Loading="Loading",e.Refreshing="Refreshing"}(r||(r={}))},19:function(e,t,n){"use strict";var r,i,a,s;function o(e){return e<10}function u(e){return e>=10&&e<20}function l(e){return e>=20}function c(e){return e===i.mine||e===a.mine||e===s.mine}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return c})),function(e){e[e.closed=0]="closed",e[e.open=1]="open"}(r||(r={})),function(e){e[e.notDefined=-1]="notDefined",e[e.empty=0]="empty",e[e.one=1]="one",e[e.two=2]="two",e[e.three=3]="three",e[e.four=4]="four",e[e.five=5]="five",e[e.six=6]="six",e[e.seven=7]="seven",e[e.eight=8]="eight",e[e.mine=9]="mine"}(i||(i={})),function(e){e[e.empty=10]="empty",e[e.one=11]="one",e[e.two=12]="two",e[e.three=13]="three",e[e.four=14]="four",e[e.five=15]="five",e[e.six=16]="six",e[e.seven=17]="seven",e[e.eight=18]="eight",e[e.mine=19]="mine"}(a||(a={})),function(e){e[e.empty=20]="empty",e[e.one=21]="one",e[e.two=22]="two",e[e.three=23]="three",e[e.four=24]="four",e[e.five=25]="five",e[e.six=26]="six",e[e.seven=27]="seven",e[e.eight=28]="eight",e[e.mine=29]="mine"}(s||(s={}))},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={timer:Symbol("timer"),mineCounter:Symbol("mineCounter"),gameState:Symbol("gameState"),mapState:Symbol("mapState"),mapOptions:Symbol("mapOptions")}},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n(26),i=n(29),a=n(38),s=new(function(){function e(){Object(r.a)(this,e),this.reactiveState=new Map,this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}return Object(i.a)(e,[{key:"register",value:function(e,t){return this.reactiveState.set(e,new a.a(t)),this}},{key:"unregister",value:function(e){return this.reactiveState.delete(e)}},{key:"getSubject",value:function(e){if(!this.reactiveState.has(e))throw new Error("Store -> entry with key ".concat(e.toString()," was not registered in the Store"));return this.reactiveState.get(e)}},{key:"getValue",value:function(e){return this.getSubject(e).value}}]),e}());function o(e){return Object(a.b)(s.getSubject(e))}},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r=n(11),i=n(26),a=n(29),s=n(0),o=function(){function e(t){Object(i.a)(this,e),this._value=t,this.subscribers=new Map,this.nextSubIndex=0}return Object(a.a)(e,[{key:"value",get:function(){return this._value}},{key:"next",value:function(e){this._value=e,this.subscribers.forEach((function(t){return queueMicrotask((function(){return t(e)}))}))}},{key:"complete",value:function(){this.subscribers.clear()}},{key:"subscribe",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.nextSubIndex;return this.nextSubIndex+=1,this.subscribers.set(r,e),n||queueMicrotask((function(){return e(t._value)})),{unsubscribe:function(){t.subscribers.delete(r)}}}}]),e}();function u(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(s.useState)(e.value),i=Object(r.a)(n,2),a=i[0],o=i[1];return Object(s.useEffect)((function(){var n=e.subscribe(o,t);return function(){return n.unsubscribe()}}),[]),[a,function(t){return e.next(t)}]}},88:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));var r=n(47),i=n.n(r),a=n(66),s=n(26),o=n(29),u=n(79),l=n(38),c=n(28),h=n(19),f=n(24),d=n(97),m=n(89),b=n(18),v=n(90),g=function(){function t(n,r,i){var a=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;Object(s.a)(this,t),this.threadsNumber=o,this.size=void 0,this._arrayBuffer=void 0,this._map=void 0,this._width=void 0,this._height=void 0,this._totalMineCount=void 0,this.allocatedBytes=void 0,this.generators=new Array,this.generatorsWorkers=new Array,this.timer=new m.a(c.a.getSubject(f.a.timer)),this.chainOpenQueue=new d.a,this.mineCountSubj=c.a.getSubject(f.a.mineCounter),this.gameState=c.a.getSubject(f.a.gameState),this.cellsLeftToOpen=void 0,this.firstClick=!0,this.emptyCellIndex=void 0,this.destroyed=!1,this._width=n,this._height=r,this._totalMineCount=i,this.size=n*r,this.allocatedBytes=this.size,this.cellsLeftToOpen=new l.a(this.size-this._totalMineCount),this.cellsLeftToOpen.subscribe((function(e){0===e&&(a.gameState.next(b.a.Won),a.mineCountSubj.next(0),a.timer.stop())})),this._arrayBuffer=new SharedArrayBuffer(this.allocatedBytes),this._map=new Int8Array(this._arrayBuffer),this._map.fill(h.a.mine,0,i).fill(h.a.notDefined,i);for(var v=0;v<this.threadsNumber;v++){var g=new Worker(e,{name:"map-generator-worker-".concat(v),type:void 0}),p=Object(u.b)(g);p.setMap(this._arrayBuffer),this.generators.push(p),this.generatorsWorkers.push(g)}}return Object(o.a)(t,[{key:"destroy",value:function(){this.destroyed||(this.generators.forEach((function(e){return e[u.a]()})),this.generatorsWorkers.forEach((function(e){return e.terminate()})),this.timer.clear(),this.mineCountSubj.next(0),this.destroyed=!0)}},{key:"generate",value:function(){var e=Object(a.a)(i.a.mark((function e(){var t,n,r,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=performance.now(),e.next=3,Promise.all(this.generators.map((function(e,t){return e.generateMap(t,a.threadsNumber)})));case 3:return n=(n=e.sent).filter((function(e){return void 0!==e})),this.emptyCellIndex=n[Math.floor(Math.random()*(n.length-1))],void 0===this.emptyCellIndex&&this._map[this._map.length-1]===h.a.notDefined&&(this.emptyCellIndex=this._map.length-1),e.next=9,this.calculateNeighboursInRange({start:0,end:this._width-1},{start:0,end:this._height-1});case 9:r=performance.now(),console.log("Map generated in ".concat(r-t," milliseconds.")),this.timer.start(),this.mineCountSubj.next(this._totalMineCount),this.gameState.next(b.a.InGame);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCellClickHandler",value:function(e,t){var n=this;return function(){if(n.gameState.value===b.a.InGame){var r=n.getCellValueXY(e,t);if(void 0!==r&&!Object(h.e)(r)&&!Object(h.d)(r)){if(n.firstClick&&r===h.a.mine&&(r=n.handleMineFirstClick(e,t,r)),n.firstClick=!1,r===h.a.mine)return n.timer.stop(),void n.gameState.next(b.a.Lost);if(r!==h.a.empty){var i=r+10;return n.setCellValueXY(e,t,i),n.cellsLeftToOpen.next(n.cellsLeftToOpen.value-1),n.gameState.value===b.a.Refreshing&&n.gameState.next(b.a.InGame),i}n.gameState.next(b.a.Refreshing);var a=performance.now();n.chainOpen({columnIndex:e,rowIndex:t}).then((function(e){n.cellsLeftToOpen.next(n.cellsLeftToOpen.value-e),console.log("Chain open performed in ".concat(performance.now()-a,".")),n.gameState.next(b.a.InGame)}))}}}}},{key:"getCellContextMenuHandler",value:function(e,t){var n=this;return function(){if(n.gameState.value===b.a.InGame){var r=n.getCellValueXY(e,t);if(void 0!==r&&!Object(h.e)(r)){var i;if(Object(h.d)(r)){if(n.mineCountSubj.value===n._totalMineCount)return;i=r-20,n.setCellValueXY(e,t,i),n.mineCountSubj.next(n.mineCountSubj.value+1)}else{if(0===n.mineCountSubj.value)return;i=r+20,n.setCellValueXY(e,t,i),n.mineCountSubj.next(n.mineCountSubj.value-1)}return i}}}}},{key:"getIndex",value:function(e,t){if(!(e<0||e>=this._width)&&!(t<0||t>=this._height))return this._height*t+e}},{key:"getCellValueXY",value:function(e,t){if(void 0!==e&&void 0!==t)return this.getCellValue(this._height*t+e)}},{key:"setCellValueXY",value:function(e,t,n){return this.setCellValue(this._height*t+e,n)}},{key:"setCellValue",value:function(e,t){Atomics.store(this._map,e,t)}},{key:"getCellValue",value:function(e){return Atomics.load(this._map,e)}},{key:"calculateNeighboursInRange",value:function(){var e=Object(a.a)(i.a.mark((function e(t,n){var r,a,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=performance.now(),e.next=3,Promise.all(this.generators.map((function(e,r){return e.calculateNeighboursInRange(s._width,s._height,t,n,r)})));case 3:a=performance.now(),console.log("Range calculated in ".concat(a-r));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleMineFirstClick",value:function(e,t,n){var r=this;if(!this.emptyCellIndex)return n;this.gameState.next(b.a.Refreshing),this.setCellValue(this.emptyCellIndex,h.a.mine),this.setCellValueXY(e,t,this.calculateNeighbours(e,t)),n=this.getCellValueXY(e,t),this.getCellNeighbours(e,t).forEach((function(e){if(void 0!==e){var t=r.getCellValue(e);Object(h.f)(t)||r.setCellValue(e,t-1)}}));var i=this.emptyCellIndex%this._width,a=(this.emptyCellIndex-i)/this._width;return this.getCellNeighbours(i,a).forEach((function(e){if(void 0!==e){var t=r.getCellValue(e);Object(h.f)(t)||r.setCellValue(e,t+1)}})),n}},{key:"calculateNeighbours",value:function(e,t){return Object(v.a)(this._map,e,t,this._width,this._height)}},{key:"chainOpen",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var n,r,a,s,o,u=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.getIndex(t.columnIndex,t.rowIndex),r=n%this._width,a=(n-r)/this._width,e.prev=3,s=this.getCellValue(n),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(3),e.abrupt("return",1);case 10:if(!(s>=10)){e.next=12;break}return e.abrupt("return",1);case 12:if(this.setCellValue(n,s+10),s===h.a.empty){e.next=15;break}return e.abrupt("return",0);case 15:return o=this.getCellNeighbours(r,a).filter((function(e){return void 0!==e})),e.next=18,Promise.all(o.map((function(e,t){var n=t%u.threadsNumber,r=e%u._width,i=(e-r)/u._width;return u.generators[n].chainOpen(u._width,u._height,r,i)})));case 18:return e.t1=e.sent.reduce((function(e,t){return e+t})),e.abrupt("return",e.t1+1);case 20:case"end":return e.stop()}}),e,this,[[3,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getCellNeighbours",value:function(e,t){return[this.getIndex(e-1,t-1),this.getIndex(e-1,t+1),this.getIndex(e+1,t-1),this.getIndex(e+1,t+1),this.getIndex(e,t-1),this.getIndex(e,t+1),this.getIndex(e+1,t),this.getIndex(e-1,t)]}}]),t}()}).call(this,n(119))},89:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(26),i=n(29),a=function(){function e(t){Object(r.a)(this,e),this.timerSubject=t,this.t0=performance.now(),this.intervalId=void 0}return Object(i.a)(e,[{key:"timePassed",get:function(){return Math.floor((performance.now()-this.t0)/1e3)}},{key:"start",value:function(){var e=this;this.clear(),this.t0=performance.now(),this.intervalId=setInterval((function(){e.timePassed>999||e.timerSubject.next(e.timePassed)}),1e3)}},{key:"stop",value:function(){clearInterval(this.intervalId)}},{key:"clear",value:function(){this.timerSubject.next(0),clearInterval(this.intervalId)}}]),e}()},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(19);function i(e,t,n,i,a){var s=0,o=a*n+t,u=t,l=n;return 0!==u&&e[o-1]===r.a.mine&&s++,u!==i-1&&e[o+1]===r.a.mine&&s++,0!==l&&e[o-i]===r.a.mine&&s++,l!==a&&e[o+i]===r.a.mine&&s++,0!==u&&(0!==l&&e[o-i-1]===r.a.mine&&s++,l!==a&&e[o+i-1]===r.a.mine&&s++),u!==i-1&&(0!==l&&e[o-i+1]===r.a.mine&&s++,l!==a&&e[o+i+1]===r.a.mine&&s++),s}},97:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(26),i=n(29),a=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(r.a)(this,e),this.value=t,this.next=n},s=function(){function e(){Object(r.a)(this,e),this.head=null,this.tail=null,this._size=0}return Object(i.a)(e,[{key:"size",get:function(){return this._size}},{key:"isEmpty",value:function(){return!this.head}},{key:"peek",value:function(){return this.isEmpty()?null:this.head.value}},{key:"enqueue",value:function(e){var t=new a(e);return this._size++,this.isEmpty()?(this.tail=t,this.head=t,this):(this.tail.next=t,this.tail=t,this)}},{key:"dequeue",value:function(){if(this.isEmpty())return null;var e=this.head.value;return this.head=this.head.next,this._size--,e}}]),e}()}},[[137,1,2]]]);
//# sourceMappingURL=main.aa53a44e.chunk.js.map